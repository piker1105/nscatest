<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPT/CSCS æ¨¡æ“¬æ¸¬é©—ç³»çµ± 2025</title>
    <style>
        :root {
            --primary: #2563eb;
            --success: #22c55e;
            --danger: #ef4444;
            --bg: #f8fafc;
            --card: #ffffff;
        }
        body { font-family: 'Microsoft JhengHei', 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding: 20px; color: #333; }
        .container { max-width: 800px; margin: 0 auto; background: var(--card); padding: 30px; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        
        h1 { text-align: center; color: var(--primary); margin-bottom: 10px; }
        .subtitle { text-align: center; color: #666; margin-bottom: 30px; font-size: 0.9em; }
        
        button { background: var(--primary); color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; font-size: 16px; width: 100%; transition: 0.2s; }
        button:hover { opacity: 0.9; }
        
        /* é¸é …æŒ‰éˆ•æ¨£å¼ */
        button.option-btn { background: #f1f5f9; color: #333; margin-bottom: 10px; text-align: left; border: 2px solid transparent; position: relative; }
        button.option-btn:hover { background: #e2e8f0; }
        button.selected { border-color: var(--primary); background: #e0f2fe; font-weight: bold; }
        
        /* æ¸¬é©—ä»‹é¢ */
        .hidden { display: none; }
        .header-bar { display: flex; justify-content: space-between; margin-bottom: 20px; font-weight: bold; color: #64748b; }
        
        /* çµæœé é¢ */
        .score-card { text-align: center; padding: 30px; background: #f0f9ff; border-radius: 8px; margin-bottom: 30px; }
        .score-text { font-size: 3em; font-weight: bold; color: var(--primary); margin: 10px 0; }
        
        /* åˆ†ææ¢ */
        .category-row { display: flex; align-items: center; margin-bottom: 12px; }
        .cat-name { width: 120px; font-weight: bold; font-size: 0.9em; }
        .progress-track { flex-grow: 1; height: 12px; background: #eee; border-radius: 6px; overflow: hidden; margin: 0 10px; }
        .progress-fill { height: 100%; transition: width 0.8s ease-out; }
        .cat-percent { width: 40px; text-align: right; font-size: 0.9em; color: #666; }

        /* éŒ¯é¡Œæª¢è¨ */
        .review-item { background: #fff5f5; border-left: 4px solid var(--danger); padding: 15px; margin-bottom: 15px; border-radius: 4px; }
        .question-text { font-size: 1.1em; font-weight: bold; margin-bottom: 10px; line-height: 1.5; }
        .user-wrong { color: var(--danger); margin-bottom: 5px; }
        .correct-ans { color: var(--success); font-weight: bold; margin-bottom: 8px; }
        .explanation { font-size: 0.9em; color: #555; background: #fff; padding: 10px; border-radius: 6px; border: 1px solid #eee; line-height: 1.6; }
        .badge { display: inline-block; background: #e2e8f0; padding: 2px 8px; border-radius: 4px; font-size: 0.75em; color: #475569; margin-bottom: 8px; }
    </style>
</head>
<body>

<div class="container">
    <div id="start-screen">
        <h1>NSCA CPT/CSCS æ¨¡æ“¬æ¸¬é©—</h1>
        <p class="subtitle">åŸºæ–¼æ‚¨ä¸Šå‚³çš„è€ƒå¤é¡Œåº« (Hohotest)</p>
        <div style="text-align: center; margin: 40px 0;">
            <p>ğŸ“ é¡Œç›®ç¯„åœï¼šé‹å‹•ç§‘å­¸ã€ç‡Ÿé¤Šå­¸</p>
            <p>â±ï¸ æ¸¬é©—æ™‚é–“ï¼šä¸é™æ™‚</p>
        </div>
        <button onclick="startQuiz()">é–‹å§‹æ¸¬é©—</button>
    </div>

    <div id="quiz-screen" class="hidden">
        <div class="header-bar">
            <span id="question-counter">Q 1</span>
            <span id="timer">00:00</span>
        </div>
        <div id="question-container">
            <div class="badge" id="q-category">åˆ†é¡</div>
            <div class="question-text" id="q-text">é¡Œç›®è¼‰å…¥ä¸­...</div>
            <div id="options-container"></div>
        </div>
        <div style="margin-top: 30px; text-align: right;">
            <button onclick="nextQuestion()" id="next-btn" style="width: auto; padding: 10px 30px;" disabled>ä¸‹ä¸€é¡Œ</button>
        </div>
    </div>

    <div id="result-screen" class="hidden">
        <h1>æ¸¬é©—æˆç¸¾å–®</h1>
        <div class="score-card">
            <div>æ‚¨çš„å¾—åˆ†</div>
            <div class="score-text" id="final-score">0</div>
            <div id="score-msg"></div>
        </div>

        <h3>ğŸ“Š å¼·å¼±é …åˆ†æ</h3>
        <div id="analysis-container" style="margin-bottom: 30px;"></div>

        <h3>ğŸ“ éŒ¯é¡Œæª¢è¨èˆ‡è©³è§£</h3>
        <div id="review-container"></div>
        
        <button onclick="location.reload()" style="margin-top: 30px;">å†æ¬¡æ¸¬é©—</button>
    </div>
</div>

<script>
    // =================================================
    // é¡Œç›®è³‡æ–™åº« (å·²å¾æ‚¨ä¸Šå‚³çš„PDFä¸­æå–ä¸¦è½‰ç‚ºç¹é«”)
    // =================================================
    const questions = [
        {
            category: "é‹å‹•ç§‘å­¸ (è‚Œè‚‰ç”Ÿç†)",
            question: "åœ¨ä½æ§“æ·±è¹²è¨“ç·´ä¸­ï¼Œä»¥ä¸‹å“ªå¡Šè‚Œè‚‰å’Œè‡€å¤§è‚Œäº’ç‚ºæ‹®æŠ—è‚Œï¼Ÿ",
            options: ["è‚¡å››é ­è‚Œ", "è†•æ—è‚Œ (Hamstrings)", "è…°å¤§è‚Œ (Psoas Major)"],
            correct: 2,
            explanation: "è‡€å¤§è‚Œçš„ä¸»è¦åŠŸèƒ½æ˜¯ã€Œé«–é—œç¯€ä¼¸å±•ã€ã€‚å› æ­¤ï¼Œå®ƒçš„æ‹®æŠ—è‚Œå¿…é ˆæ˜¯è² è²¬ã€Œé«–é—œç¯€å±ˆæ›²ã€çš„è‚Œè‚‰ã€‚é¸é …ä¸­ï¼Œè…°å¤§è‚Œæ˜¯ä¸»è¦çš„é«–å±ˆè‚Œã€‚"
        },
        {
            category: "é‹å‹•ç§‘å­¸ (ç”Ÿç‰©åŠ›å­¸)",
            question: "ä»¥ä¸‹å“ªå€‹é¸é …ä¸­çš„è‚Œè‚‰å’Œæ”¶ç¸®å½¢å¼åœ¨äºŒé ­è‚Œå½èˆ‰è¨“ç·´çš„å•éˆ´ã€Œä¸‹é™éç¨‹ä¸­ã€è¢«ç”¨åˆ°ï¼Ÿ",
            options: ["ä¼¸è‚˜è‚Œç¾¤é›¢å¿ƒæ”¶ç¸®", "å±ˆè‚˜è‚Œç¾¤é›¢å¿ƒæ”¶ç¸®", "å±ˆè‚˜è‚Œç¾¤å‘å¿ƒæ”¶ç¸®"],
            correct: 1,
            explanation: "åœ¨å•éˆ´ä¸‹é™ï¼ˆä¼¸è‚˜ï¼‰çš„éç¨‹ä¸­ï¼ŒåŸæœ¬æ”¶ç¸®çš„å±ˆè‚˜è‚Œç¾¤ï¼ˆè‚±äºŒé ­è‚Œç­‰ï¼‰è¢«æ‹‰é•·ï¼Œé€™å±¬æ–¼ã€Œé›¢å¿ƒæ”¶ç¸®ã€ä»¥æ§åˆ¶é‡åŠ›ã€‚"
        },
        {
            category: "é‹å‹•ç§‘å­¸ (è¨“ç·´æ³•)",
            question: "ä»¥ä¸‹å“ªä¸€çµ„é–“æ­‡æ™‚é•·æœ€é©åˆé€²è¡Œ 2 åˆ†é˜ 800 ç±³é–“æ­‡è·‘è¨“ç·´ï¼Ÿ",
            options: ["2åˆ†é˜", "4åˆ†é˜", "6åˆ†é˜"],
            correct: 2,
            explanation: "2åˆ†é˜çš„é«˜å¼·åº¦é‹å‹•ä¸»è¦ä¾è³´ç³–é…µè§£ç³»çµ±ã€‚ç‚ºäº†è®“è©²ç³»çµ±å……åˆ†æ¢å¾©ï¼Œå»ºè­°çš„è¨“ç·´:ä¼‘æ¯æ¯”ä¾‹é€šå¸¸ç‚º 1:3 è‡³ 1:4ã€‚å› æ­¤ 2åˆ†é˜ x 3 = 6åˆ†é˜çš„ä¼‘æ¯æœ€ç‚ºåˆé©ã€‚"
        },
        {
            category: "é‹å‹•ç§‘å­¸ (æ€§åˆ¥å·®ç•°)",
            question: "ç›¸æ¯”æ–¼ç”·æ€§ï¼Œå¥³æ€§è‚Œçº–ç¶­ã€Œæ©«æˆªé¢ã€åŠ›é‡çš„æå‡æ½›åŠ›ç‚ºä½•ï¼Ÿ",
            options: ["ä½æ–¼ç”·æ€§", "èˆ‡ç”·æ€§æ¥è¿‘", "æ¯”ç”·æ€§æ›´é«˜"],
            correct: 1,
            explanation: "é›–ç„¶ç”·æ€§çš„è‚Œè‚‰ç¸½é‡é€šå¸¸è¼ƒå¤§ï¼Œä½†è‹¥æ¯”è¼ƒã€Œå–®ä½æ©«æˆªé¢ç©ã€çš„è‚Œè‚‰åŠ›é‡ï¼ˆMuscle Qualityï¼‰ï¼Œç”·å¥³çš„è‚Œè‚‰çµ„ç¹”ç”¢ç”ŸåŠ›é‡çš„èƒ½åŠ›æ˜¯ç›¸ä¼¼çš„ã€‚"
        },
        {
            category: "é‹å‹•ç§‘å­¸ (å¿ƒè‚ºé©æ‡‰)",
            question: "å°æœ‰æ°§è¨“ç·´è€…ä¾†èªªï¼Œä»¥ä¸‹å“ªé …å¿ƒè¡€ç®¡æ–¹é¢çš„æ”¹è®Šå°æå‡æœ‰æ°§é‹å‹•çš„è€ä¹…æ€§æœ€æœ‰å¹«åŠ©ï¼Ÿ",
            options: ["æœ€å¤§å¿ƒè¼¸å‡ºé‡å¢åŠ ", "ä¼‘æ¯æ™‚è¡€å£“ä¸‹é™", "ä¼‘æ¯æ™‚å¿ƒç‡ä¸‹é™"],
            correct: 0,
            explanation: "æœ€å¤§æ”æ°§é‡ (VO2max) çš„æå‡ä¸»è¦å—é™æ–¼å¿ƒè‡Ÿè¼¸é€è¡€æ¶²çš„èƒ½åŠ›ã€‚å› æ­¤ï¼Œã€Œæœ€å¤§å¿ƒè¼¸å‡ºé‡ (Max Cardiac Output)ã€çš„å¢åŠ æ˜¯æå‡æœ‰æ°§è¡¨ç¾æœ€é—œéµçš„é©æ‡‰ã€‚"
        },
        {
            category: "é‹å‹•ç§‘å­¸ (è‚Œè‚‰ç”Ÿç†)",
            question: "åœ¨é€²è¡Œè…¿èˆ‰ (Leg Press) è¨“ç·´æ™‚ï¼Œè†•æ—è‚Œçš„å‘å¿ƒæ”¶ç¸®æœƒå°è‡´è‚Œå°ç¯€çµæ§‹ç™¼ç”Ÿä»€éº¼è®ŠåŒ–ï¼Ÿ",
            options: ["Aå¸¶é•·åº¦è®Šé•·", "Iå¸¶é•·åº¦ä¸è®Š", "Hå€é•·åº¦è®ŠçŸ­"],
            correct: 2,
            explanation: "æ ¹æ“šè‚Œçµ²æ»‘å‹•ç†è«–ï¼Œè‚Œè‚‰æ”¶ç¸®æ™‚ï¼Œè‚Œå‹•è›‹ç™½å‘è‚Œçƒè›‹ç™½ä¸­å¿ƒæ»‘å‹•ï¼Œå°è‡´ Hå€ï¼ˆåƒ…æœ‰ç²—è‚Œçµ²å€åŸŸï¼‰å’Œ Iå¸¶è®ŠçŸ­ï¼Œä½† Aå¸¶ï¼ˆç²—è‚Œçµ²é•·åº¦ï¼‰ä¿æŒä¸è®Šã€‚"
        },
        {
            category: "é‹å‹•ç‡Ÿé¤Š (èƒ½é‡ä»£è¬)",
            question: "ä»¥ä¸‹å“ªç¨®ä¾›èƒ½ç‰©è³ªçš„æ¶ˆè€—ï¼Œæœ€ç›´æ¥å½±éŸ¿é¦¬æ‹‰æ¾é‹å‹•å“¡çš„æ°´å¹³è¡¨ç¾ï¼Ÿ",
            options: ["è‚Œç³–åŸ", "ç”˜æ²¹ä¸‰é…¯", "ç£·é…¸è‚Œé…¸"],
            correct: 0,
            explanation: "é›–ç„¶é¦¬æ‹‰æ¾ä¾è³´è„‚è‚ªä¾›èƒ½ï¼Œä½†ã€Œè‚Œç³–åŸ (Muscle Glycogen)ã€çš„è€—ç›¡ï¼ˆæ’ç‰†æœŸï¼‰æ˜¯é™åˆ¶é«˜å¼·åº¦è€åŠ›è¡¨ç¾çš„ä¸»è¦å› ç´ ã€‚"
        },
        {
            category: "é‹å‹•å¿ƒç†",
            question: "ä»¥ä¸‹å“ªå€‹ç’°å¢ƒå°æ¿€ç™¼é‹å‹•å“¡å–å¾—æ›´é«˜æˆå°±çš„å‹•æ©Ÿæœ€æœ‰å¹«åŠ©ï¼Ÿ",
            options: ["ä½æ°´å¹³å°æŠ—çš„ç’°å¢ƒï¼Œå‹åˆ©å”¾æ‰‹å¯å¾—", "å……æ»¿æŒ‘æˆ°çš„å°æŠ—ç’°å¢ƒï¼Œå‹åˆ©éœ€è¦æ‹¼æä½†ç„¡æ³•ä¿è­‰", "æ¥µç«¯é›£åº¦çš„å°æŠ—ç’°å¢ƒï¼Œå‹åˆ©åŸºæœ¬æ²’å¯èƒ½"],
            correct: 1,
            explanation: "æˆå°±å‹•æ©Ÿç†è«–æŒ‡å‡ºï¼Œç•¶æˆåŠŸæ©Ÿç‡ç´„ç‚º 50%ï¼ˆå……æ»¿æŒ‘æˆ°ä½†æœ‰å¸Œæœ›ï¼‰æ™‚ï¼Œé‹å‹•å“¡çš„å‹•æ©Ÿæœ€å¼·ã€‚"
        },
        {
            category: "é‹å‹•ç§‘å­¸ (è‚Œçº–ç¶­)",
            question: "ä»¥ä¸‹å“ªä¸€é …æ˜¯ II å‹ï¼ˆå¿«ç¸®ï¼‰è‚Œçº–ç¶­çš„ç‰¹é»ï¼Ÿ",
            options: ["æ”¶ç¸®é€Ÿåº¦æ…¢", "çº–ç¶­ç›´å¾‘çº–ç´°", "åŠ›é‡è¼¸å‡ºé«˜"],
            correct: 2,
            explanation: "II å‹è‚Œçº–ç¶­ï¼ˆå¿«ç¸®è‚Œï¼‰çš„ç‰¹é»æ˜¯ï¼šæ”¶ç¸®é€Ÿåº¦å¿«ã€åŠ›é‡è¼¸å‡ºå¤§ã€å®¹æ˜“ç–²å‹ã€æ©«æˆªé¢ç©é€šå¸¸è¼ƒå¤§ã€‚"
        },
        {
            category: "é‹å‹•ç‡Ÿé¤Š (èƒ½é‡ä»£è¬)",
            question: "ä»¥ä¸‹å“ªé …é‹å‹•ä¸»è¦ä¾é ç£·é…¸è‚Œé…¸ (ATP-CP) ç³»çµ±ä¾›èƒ½ï¼Ÿ",
            options: ["200ç±³æ¸¸æ³³", "3åƒç±³è·‘æ­¥", "5RM æ¨èˆ‰"],
            correct: 2,
            explanation: "ATP-CP ç³»çµ±ä¸»è¦ä¾›æ‡‰ 0-10 ç§’çš„æ¥µé«˜å¼·åº¦é‹å‹•ã€‚5RM çš„æ¨èˆ‰ï¼ˆç´„é‡è¨“ä¸€çµ„ï¼‰ä¸»è¦ç”±æ­¤ç³»çµ±ä¾›èƒ½ã€‚200ç±³æ¸¸æ³³å’Œ3åƒç±³è·‘å‰‡ä¾è³´ç³–é…µè§£å’Œæœ‰æ°§ç³»çµ±ã€‚"
        }
    ];
    // =================================================

    let currentQ = 0;
    let score = 0;
    let userAnswers = Array(questions.length).fill(null);
    let timerInt;
    let seconds = 0;

    // å•Ÿå‹•æ¸¬é©—
    function startQuiz() {
        document.getElementById('start-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        loadQuestion(0);
        
        timerInt = setInterval(() => {
            seconds++;
            let m = Math.floor(seconds / 60).toString().padStart(2, '0');
            let s = (seconds % 60).toString().padStart(2, '0');
            document.getElementById('timer').innerText = `${m}:${s}`;
        }, 1000);
    }

    // è¼‰å…¥é¡Œç›®
    function loadQuestion(index) {
        currentQ = index;
        const q = questions[index];
        
        document.getElementById('question-counter').innerText = `é¡Œç›® ${index + 1} / ${questions.length}`;
        document.getElementById('q-category').innerText = q.category;
        document.getElementById('q-text').innerText = q.question;
        
        const container = document.getElementById('options-container');
        container.innerHTML = '';
        
        q.options.forEach((opt, i) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerHTML = `<span style="font-weight:bold; margin-right:10px;">${String.fromCharCode(65+i)}.</span> ${opt}`;
            btn.onclick = () => selectAnswer(i, btn);
            
            // å¦‚æœä¹‹å‰ç­”éï¼Œæ¢å¾©ç‹€æ…‹
            if (userAnswers[index] === i) btn.classList.add('selected');
            
            container.appendChild(btn);
        });

        // æŒ‰éˆ•ç‹€æ…‹
        const nextBtn = document.getElementById('next-btn');
        nextBtn.disabled = userAnswers[index] === null;
        nextBtn.style.opacity = userAnswers[index] === null ? 0.5 : 1;
        nextBtn.innerText = (index === questions.length - 1) ? "æäº¤è©¦å·" : "ä¸‹ä¸€é¡Œ";
    }

    // é¸æ“‡ç­”æ¡ˆ
    function selectAnswer(optionIndex, btnElement) {
        const allBtns = document.querySelectorAll('.option-btn');
        allBtns.forEach(b => b.classList.remove('selected'));
        btnElement.classList.add('selected');
        
        userAnswers[currentQ] = optionIndex;
        
        const nextBtn = document.getElementById('next-btn');
        nextBtn.disabled = false;
        nextBtn.style.opacity = 1;
    }

    // ä¸‹ä¸€é¡Œæˆ–çµç®—
    function nextQuestion() {
        if (currentQ < questions.length - 1) {
            loadQuestion(currentQ + 1);
        } else {
            finishQuiz();
        }
    }

    // çµç®—æˆç¸¾
    function finishQuiz() {
        clearInterval(timerInt);
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');

        let correctCount = 0;
        let catStats = {}; // { 'CategoryName': {total:0, correct:0} }

        questions.forEach((q, i) => {
            const isRight = userAnswers[i] === q.correct;
            if (isRight) correctCount++;
            
            // åˆ†é¡çµ±è¨ˆ
            let cat = q.category.split(" ")[0]; // å–ä¸»åˆ†é¡
            if (!catStats[cat]) catStats[cat] = {total:0, correct:0};
            catStats[cat].total++;
            if (isRight) catStats[cat].correct++;
        });

        // 1. ç¸½åˆ†é¡¯ç¤º
        const finalScore = Math.round((correctCount / questions.length) * 100);
        document.getElementById('final-score').innerText = finalScore;
        document.getElementById('score-msg').innerText = finalScore >= 70 ? "å¤ªæ£’äº†ï¼é€šéæ¸¬é©—æ¨™æº– ğŸ‰" : "åŠ æ²¹ï¼å»ºè­°è¤‡ç¿’éŒ¯é¡Œå¾Œå†æŒ‘æˆ° ğŸ’ª";
        document.getElementById('score-msg').style.color = finalScore >= 70 ? "var(--success)" : "var(--danger)";

        // 2. åˆ†ææ¢æ¸²æŸ“
        const analysisHTML = Object.keys(catStats).map(cat => {
            const stat = catStats[cat];
            const pct = Math.round((stat.correct / stat.total) * 100);
            const color = pct < 60 ? '#ef4444' : (pct < 80 ? '#f59e0b' : '#22c55e');
            
            return `
            <div class="category-row">
                <div class="cat-name">${cat}</div>
                <div class="progress-track">
                    <div class="progress-fill" style="width: ${pct}%; background: ${color};"></div>
                </div>
                <div class="cat-percent">${pct}%</div>
            </div>`;
        }).join('');
        document.getElementById('analysis-container').innerHTML = analysisHTML;

        // 3. éŒ¯é¡Œæª¢è¨æ¸²æŸ“
        const reviewContainer = document.getElementById('review-container');
        reviewContainer.innerHTML = '';
        
        let hasWrong = false;
        questions.forEach((q, i) => {
            if (userAnswers[i] !== q.correct) {
                hasWrong = true;
                const userChoice = userAnswers[i] !== null ? String.fromCharCode(65 + userAnswers[i]) + ". " + q.options[userAnswers[i]] : "æœªä½œç­”";
                const correctChoice = String.fromCharCode(65 + q.correct) + ". " + q.options[q.correct];
                
                reviewContainer.innerHTML += `
                <div class="review-item">
                    <div class="badge">${q.category}</div>
                    <div class="question-text">${i + 1}. ${q.question}</div>
                    <div class="user-wrong">âŒ æ‚¨çš„å›ç­”ï¼š${userChoice}</div>
                    <div class="correct-ans">âœ… æ­£ç¢ºç­”æ¡ˆï¼š${correctChoice}</div>
                    <div class="explanation"><strong>ğŸ’¡ è§£æï¼š</strong>${q.explanation}</div>
                </div>`;
            }
        });

        if (!hasWrong) {
            reviewContainer.innerHTML = `<div style="text-align:center; padding:20px; color:var(--success); font-weight:bold;">æ­å–œï¼å…¨å°ï¼æ‚¨å·²ç¶“å®Œå…¨æŒæ¡é€™äº›å…§å®¹äº†ï¼ğŸ‰</div>`;
        }
    }
</script>

</body>
</html>
